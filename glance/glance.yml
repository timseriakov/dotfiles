server:
  host: 0.0.0.0
  port: 1931

pages:
  - name: Home
    # Optionally, if you only have a single page you can hide the desktop navigation for a cleaner look
    hide-desktop-navigation: false

    columns:
      - size: small
        widgets:
          - type: calendar
            first-day-of-week: monday

          - type: rss
            limit: 10
            collapse-after: 3
            cache: 12h
            feeds:
              - url: https://selfh.st/rss/
                title: selfh.st
                limit: 4

          - type: twitch-channels
            channels:
              - theprimeagen

      - size: full
        widgets:
          - type: group
            widgets:
              - type: hacker-news
              - type: lobsters

          - type: videos
            channels:
              - UCYeiozh-4QwuC1sjgCmB92w # DevOps Toolbox
              - UCxa8XPOhu4iA6Lon71TJ0rg # Ampersand
              - UCo71RUe6DX4w-Vd47rFLXPg # typecraft
              - UCYvMQ4fBOX2kwfJ981cZSPg # proLinux

          - type: group
            widgets:
              - type: reddit
                subreddit: unixporn
                show-thumbnails: true
                app-auth:
                  id: ${REDDIT_CLIENT_ID}
                  secret: ${REDDIT_CLIENT_SECRET}
                  name: ${REDDIT_USERNAME}
              - type: reddit
                subreddit: selfhosted
                show-thumbnails: true
                app-auth:
                  id: ${REDDIT_CLIENT_ID}
                  secret: ${REDDIT_CLIENT_SECRET}
                  name: ${REDDIT_USERNAME}

      - size: small
        widgets:
          - type: weather
            location: Minsk, Belarus
            units: metric # alternatively "imperial"
            hour-format: 24h # alternatively "24h"
            # Optionally hide the location from being displayed in the widget
            hide-location: true

          - type: custom-api
            title: Tailscale Devices
            title-url: https://login.tailscale.com/admin/machines
            url: https://api.tailscale.com/api/v2/tailnet/-/devices
            headers:
              Authorization: Bearer ${TAILSCALE_API_KEY}
            cache: 10m
            template: |
              {{/* User Variables */}}
              {{/* Set to true if you'd like an indicator for online devices */}}
              {{ $enableOnlineIndicator := true }}

              <style>
                .device-info-container {
                  position: relative;
                  overflow: hidden;
                  height: 1.5em;
                }

                .device-info {
                  display: flex;
                  transition: transform 0.2s ease, opacity 0.2s ease;
                }

                .device-ip {
                  position: absolute;
                  top: 0;
                  left: 0;
                  transform: translateY(-100%);
                  opacity: 0;
                  transition: transform 0.2s ease, opacity 0.2s ease;
                }

                .device-info-container:hover .device-info {
                  transform: translateY(100%);
                  opacity: 0;
                }

                .device-info-container:hover .device-ip {
                  transform: translateY(0);
                  opacity: 1;
                }

                .update-indicator {
                  width: 8px;
                  height: 8px;
                  border-radius: 50%;
                  background-color: var(--color-primary);
                  display: inline-block;
                  margin-left: 4px;
                  vertical-align: middle;
                }

                .offline-indicator {
                  width: 8px;
                  height: 8px;
                  border-radius: 50%;
                  background-color: var(--color-negative);
                  display: inline-block;
                  margin-left: 4px;
                  vertical-align: middle;
                }

                .online-indicator {
                  width: 8px;
                  height: 8px;
                  border-radius: 50%;
                  background-color: var(--color-positive);
                  display: inline-block;
                  margin-left: 4px;
                  vertical-align: middle;
                }

                .device-name-container {
                  display: flex;
                  align-items: center;
                  gap: 8px;
                }

                .indicators-container {
                  display: flex;
                  align-items: center;
                  gap: 4px;
                }
              </style>
              <ul class="list list-gap-10 collapsible-container" data-collapse-after="4">
                {{ range .JSON.Array "devices" }}
                <li>
                  <div class="flex items-center gap-10">
                    <div class="device-name-container grow">
                      <span class="size-h4 block text-truncate color-primary">
                        {{ findMatch "^([^.]+)" (.String "name") }}
                      </span>
                      <div class="indicators-container">
                        {{ if (.Bool "updateAvailable") }}
                        <span class="update-indicator" data-popover-type="text" data-popover-text="Update Available"></span>
                        {{ end }}

                        {{ $lastSeen := .String "lastSeen" | parseTime "rfc3339" }}
                        {{ if not ($lastSeen.After (offsetNow "-10s")) }}
                        {{ $lastSeenTimezoned := $lastSeen.In now.Location }}
                        <span class="offline-indicator" data-popover-type="text"
                          data-popover-text="Offline - Last seen {{ $lastSeenTimezoned.Format " Jan 2 3:04pm" }}"></span>
                        {{ else if $enableOnlineIndicator }}
                          <span class="online-indicator" data-popover-type="text" data-popover-text="Online"></span>
                        {{ end }}
                      </div>
                    </div>
                  </div>
                  <div class="device-info-container">
                    <ul class="list-horizontal-text device-info">
                      <li>{{ .String "os" }}</li>
                      <li>{{ .String "user" }}</li>
                    </ul>
                    <div class="device-ip">
                      {{ .String "addresses.0"}}
                    </div>
                  </div>
                </li>
                {{ end }}
              </ul>

          - type: releases
            cache: 1d
            show-source-icon: true
            token: ${GITHUB_TOKEN}
            # Without authentication the Github API allows for up to 60 requests per hour. You can create a
            # read-only token from your Github account settings and use it here to increase the limit.
            # token: ...
            repositories:
              - payloadcms/payload
              - glanceapp/glance
              - neovide/neovide
              - neovim/neovim
              - yarlson/lnk
              - eyaltoledano/claude-task-master
              - Haleclipse/CCometixLine

          - type: markets
            markets:
              - symbol: BTC-USD
                name: Bitcoin
              - symbol: XMR-USD
                name: Monero
              - symbol: ETH-USD
                name: Ethereum
              - symbol: SOL-USD
                name: Solana
              - symbol: DOT-USD
                name: Polkadot

  # Add more pages here:
  # - name: Your page name
  #   columns:
  #     - size: small
  #       widgets:
  #         # Add widgets here

  #     - size: full
  #       widgets:
  #         # Add widgets here

  #     - size: small
  #       widgets:
  #         # Add widgets here
  #
  - name: Repos
    columns:
      - size: full
        widgets:
          - type: repository
            repository: payloadcms/payload
            pull-requests-limit: 10
            issues-limit: 10
            commits-limit: 5
      - size: full
        widgets:
          - type: repository
            repository: neovide/neovide
            pull-requests-limit: 10
            issues-limit: 10
            commits-limit: 5

theme:
  presets:
    dark:
      background-color: 220 16 18
      primary-color: 222 30 65
      positive-color: 160 30 55
      negative-color: 345 65 60
      contrast-multiplier: 1.15
