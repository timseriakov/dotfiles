local function setup_gp()
	require("gp").setup({
		openai_api_key = os.getenv("OPENAI_API_KEY"), -- Укажите ваш API-ключ
		providers = {
			openai = {
				endpoint = "https://api.openai.com/v1/chat/completions",
				secret = os.getenv("OPENAI_API_KEY"),
			},
		},
	})
end

return {
	{
		"robitx/gp.nvim",
		dependencies = { "nvim-lua/plenary.nvim" },
		config = setup_gp,
		keys = {
			{
				"<leader>ag",
				"<cmd>GpChatNew<cr>",
				mode = { "n", "v" },
				noremap = true,
				silent = true,
				desc = "Gp.nvim New Chat",
			},
			{
				"<leader>ar",
				"<cmd>GpRewrite<cr>",
				mode = { "n", "v" },
				noremap = true,
				silent = true,
				desc = "Gp.nvim Rewrite",
			},
			{
				"<leader>ap",
				"<cmd>GpAppend<cr>",
				mode = { "n", "v" },
				noremap = true,
				silent = true,
				desc = "Gp.nvim Append",
			},
		},
	},
}
